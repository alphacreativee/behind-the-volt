import{preloadImages}from"../../libs/utils.js";let lenis=new Lenis;function footer(){var e,t,r=document.getElementById("footerLine");r?(e=r.getContext("2d"),r.width=window.innerWidth,r.height=50,t=r.width,r=r.height,e.clearRect(0,0,t,r),e.strokeStyle="#00FFFF",e.lineWidth=3,e.beginPath(),e.moveTo(0,5),e.lineTo(.17*t,5),e.lineTo(.19*t,40),e.lineTo(t,40),e.stroke()):console.warn("Canvas not found!")}lenis.on("scroll",ScrollTrigger.update),gsap.ticker.add(e=>{lenis.raf(1e3*e)}),gsap.ticker.lagSmoothing(0);let splitTextInstances=[];function animationText(){splitTextInstances.forEach(e=>e.revert()),splitTextInstances.length=0,gsap.registerPlugin(ScrollTrigger,SplitText),gsap.utils.toArray(".effect-heading").forEach(e=>{var t=new SplitText(e,{type:"words, chars",charsClass:"char",wordsClass:"word"});splitTextInstances.push(t),gsap.fromTo(t.chars,{filter:"blur(10px)",y:10,willChange:"filter, transform",opacity:0,skewX:"-3deg"},{ease:"power3.out",filter:"blur(0px)",y:0,skewX:"0deg",stagger:.05,opacity:1,duration:2,scrollTrigger:{trigger:e,start:"top 60%"}})}),gsap.utils.toArray(".effect-description").forEach(e=>{var t=new SplitText(e,{type:"lines",linesClass:"line",mask:"lines"});splitTextInstances.push(t),gsap.fromTo(t.lines,{y:40,willChange:"transform"},{y:0,duration:2,ease:"power3.out",stagger:.05,scrollTrigger:{trigger:e,start:"top 60%"}})}),gsap.utils.toArray(".effect-fade-up").forEach(e=>{var t=parseFloat(e.dataset.start)||center;gsap.fromTo(e,{y:20,opacity:0,willChange:"transform"},{y:0,duration:1,opacity:1,ease:"power3.out",scrollTrigger:{trigger:e,start:`top ${t}%`}})})}function animateTextKaraoke(){$(".effect-karaoke").length<1||(gsap.registerPlugin(ScrollTrigger,SplitText),gsap.utils.toArray(".effect-karaoke").forEach(e=>{var t=new SplitText(e,{type:"words, chars",wordsClass:"word",charsClass:"char"});gsap.to(t.chars,{color:"#00ffff",duration:.2,stagger:.05,ease:"power3.out",scrollTrigger:{trigger:e,start:"top 90%",end:"top 45%",scrub:!0}})}))}function animation(){gsap.utils.toArray(".parallax-trigger").forEach(e=>{var t=e.querySelector("img");t&&gsap.timeline({scrollTrigger:{trigger:e,scrub:!0,pin:!1}}).fromTo(t,{yPercent:-10,ease:"none"},{yPercent:10,ease:"none"})})}function magicCursor(){var t=document.querySelector(".magic-cursor");gsap.set(t,{xPercent:-50,yPercent:-50,opacity:0});let r,o;window.addEventListener("mousemove",e=>{r=e.clientX,o=e.clientY,gsap.to(t,{x:r,y:o,opacity:1,duration:.1})}),document.addEventListener("mouseout",function(e){e.relatedTarget||e.toElement||gsap.to(t,{opacity:0,duration:.2})}),document.addEventListener("mouseover",function(){gsap.to(t,{opacity:1,duration:.2})});var e=document.querySelectorAll("[data-cursor-text]"),a=document.querySelector(".magic-cursor .cursor");e.forEach(e=>{e.addEventListener("mouseenter",()=>{a.classList.add("active")}),e.addEventListener("mouseleave",()=>{a.classList.remove("active")})})}function header(){let e=document.querySelector(".header-hambuger"),t=document.querySelector(".header-menu");e.addEventListener("click",()=>{e.classList.toggle("active"),t.classList.toggle("active")}),gsap.to(".header",{scrollTrigger:{trigger:"body",start:"top+=100 top",toggleClass:{targets:".header",className:"scrolled"},once:!1}})}function ourService(){function t(e){var t=this.querySelector(".card-item"),r=t.offsetHeight/2;t.style.transform="rotateX("+-(e.offsetY-r)/30+"deg) rotateY("+(e.offsetX-t.offsetWidth/2)/15+"deg)"}function r(e){this.querySelector(".card-item").style.transform="rotate(0)"}$(".our-services").length<1||(document.querySelectorAll(".our-services .card").forEach(e=>{e.addEventListener("mousemove",t),e.addEventListener("mouseout",r)}),$(".consultancy .item").on("click",function(){var e=$(this);e.hasClass("active")||($(".consultancy .item").removeClass("active"),e.addClass("active"),setTimeout(()=>{animationText()},500))}))}let init=()=>{gsap.registerPlugin(ScrollTrigger),animationText(),animateTextKaraoke(),footer(),magicCursor(),header(),ourService(),animation(),ScrollTrigger.refresh(!0)};preloadImages("img").then(()=>{init()}),$(window).on("beforeunload",function(){$(window).scrollTop(0)});