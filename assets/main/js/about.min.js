import{preloadImages}from"../../libs/utils.js";function sectionAbout(){var e=document.querySelectorAll(".horizontal-cards");e.length&&e.forEach((i,e)=>{let n=i.querySelector(".horizontal-cards .list-item");if(n){let r=()=>{var e=i.querySelectorAll(".horizontal-cards .card-item");return Array.from(e).reduce((e,t)=>e+t.offsetHeight,0)};a=n.scrollWidth,s=window.innerWidth<1600?80:0;let t=a-window.innerWidth+s+100;(e=>{let t=i.nextElementSibling;t&&t.classList.contains("horizontal-spacer")||((t=document.createElement("div")).classList.add("horizontal-spacer"),i.insertAdjacentElement("afterend",t));r();t.style.height=e+"px"})(t);a=n,s=t;var o,a=gsap.to(a,{x:-s,duration:3,ease:"none"}),s=(s=t,o=991<window.innerWidth,ScrollTrigger.create({trigger:i,start:"top 20%",end:"+="+s,pin:o,animation:a,scrub:1,pinSpacing:!1,id:"aboutScroll-"+e}),ScrollTrigger.getById("aboutScroll-"+e));s&&(gsap.from(i.querySelectorAll(".card-item"),{yPercent:20,opacity:0,rotate:10,ease:"power2.out",stagger:{each:.3,from:"start"},scrollTrigger:{trigger:i,start:"top 60%",toggleActions:"play none none none"}}),i.querySelectorAll(".about-cards .card-item img").forEach(e=>{gsap.fromTo(e,{xPercent:-10,ease:"none"},{xPercent:10,ease:"none",scrollTrigger:{trigger:i,start:"top 20%",end:"+="+t,scrub:!0}})}))}})}function ourPromise(){$(".our-promise").length<1||$(".our-promise .item-line").each(function(){var e=this,t=e.getContext("2d"),r=$(e).parent(),i=r[0].offsetWidth-10,r=r[0].offsetHeight-10,n=r-80;e.width=i,e.height=r,t.clearRect(0,0,i,r),t.strokeStyle="#00FFFF",t.lineWidth=2,t.beginPath(),t.moveTo(2,0),t.lineTo(2,n),t.lineTo(110,r-2),t.lineTo(i,r-2),t.stroke()})}function ourExpertise(){if(!($(".our-expertise").length<1)){$(".our-expertise .expertise-line").each(function(){var e=this,t=e.getContext("2d"),r=$(e).parent(),i=r[0].offsetWidth-10,r=r[0].offsetHeight-10,n=r-80;e.width=i,e.height=r,t.clearRect(0,0,i,r),t.strokeStyle="#00FFFF",t.lineWidth=2,t.beginPath(),t.moveTo(47.5,110),t.lineTo(47.5,n),t.lineTo(110,r-2),t.lineTo(i,r-2),t.stroke()});let e=!1;ScrollTrigger.create({trigger:".expertise-wrapper",start:"top center",once:!0,onEnter:()=>{e||($(".our-expertise .number").each(function(){$(this).find("span[data-value]").each(function(){var e=parseInt($(this).attr("data-value"))+1;$(this).css("transform",`translateY(-${100*e}%)`)})}),e=!0)}}),$(".our-expertise .expertise-item .number").each(function(){let r=$(this);let e=/(\D+)?(\d+(\.\d+)?)(\D+)?/.exec(r.text());e&&(e.shift(),e=e.filter(e=>null!=e),r.empty(),e.forEach(e=>{isNaN(e)?r.append(`<span>${e}</span>`):e.replace(/[^0-9]/g,"").split("").forEach(e=>{var t=parseInt(e);isNaN(t)?r.append(`<span>${e}</span>`):r.append(`
              <span data-value="${e}">
                <span> </span>
                ${Array(t+1).fill(0).map((e,t)=>`<span>${t}</span>`).join("")}
              </span>
            `)})}))})}}let init=()=>{gsap.registerPlugin(ScrollTrigger),sectionAbout(),ourPromise(),ourExpertise()};preloadImages("img").then(()=>{init()}),$(window).on("beforeunload",function(){$(window).scrollTop(0)});