import{preloadImages}from"../../libs/utils.js";function sectionAbout(){var e=document.querySelectorAll(".about-cards");e.length&&e.forEach((n,e)=>{let r=n.querySelector(".about-cards .list-item");if(r){let o=()=>{var e=n.querySelectorAll(".about-cards .card-item");return Array.from(e).reduce((e,t)=>e+t.offsetHeight,0)};i=r.scrollWidth,l=window.innerWidth<1600?80:0;let t=i-window.innerWidth+l+100;(e=>{let t=n.nextElementSibling;t&&t.classList.contains("about-spacer")||((t=document.createElement("div")).classList.add("about-spacer"),n.insertAdjacentElement("afterend",t));var r=o();t.style.height=Math.max(r,e)+"px"})(t);i=r,l=t;var a,i=gsap.to(i,{x:-l,duration:3,ease:"none"}),l=(l=t,a=991<window.innerWidth,ScrollTrigger.create({trigger:n,start:"top 20%",end:"+="+l,pin:a,animation:i,scrub:1,pinSpacing:!1,id:"aboutScroll-"+e}),ScrollTrigger.getById("aboutScroll-"+e));l&&(gsap.from(n.querySelectorAll(".card-item"),{yPercent:20,opacity:0,rotate:10,ease:"power2.out",stagger:{each:.3,from:"start"},scrollTrigger:{trigger:n,start:"top 60%",toggleActions:"play none none none"}}),n.querySelectorAll(".about-cards .card-item img").forEach(e=>{gsap.fromTo(e,{xPercent:-10,ease:"none"},{xPercent:10,ease:"none",scrollTrigger:{trigger:n,start:"top 20%",end:"+="+t,scrub:!0}})}))}})}let init=()=>{gsap.registerPlugin(ScrollTrigger),sectionAbout()};preloadImages("img").then(()=>{init()}),$(window).on("beforeunload",function(){$(window).scrollTop(0)});