import{preloadImages}from"../../libs/utils.js";function pinEl(){gsap.registerPlugin(ScrollTrigger);var e=document.querySelector(".pin-el-left");let t=document.querySelector(".pin-el-right"),l=t.querySelectorAll(".pin-el-box");let i=1<l.length?84*l.length:0,n=e.querySelectorAll(".pin-el-title");n[0].classList.add("active"),gsap.to(".pin-el-left",{scrollTrigger:{trigger:e,start:"top 35%",end:()=>"+="+(t.offsetHeight-i-24),pin:!0,pinSpacing:!1,onUpdate:e=>{e=e.progress,e=Math.floor(e*l.length);let i=Math.min(e,l.length-1);n.forEach((e,t)=>{t===i?e.classList.add("active"):e.classList.remove("active")})}}}),$(".pin-el .pin-el-description .pin-el-line").each(function(){var e=this,t=e.getContext("2d"),i=$(e).parent(),l=i[0].offsetWidth,i=i[0].offsetHeight,n=i-60;e.width=l,e.height=i,t.clearRect(0,0,l,i),t.strokeStyle="#00FFFF",t.lineWidth=2,t.beginPath(),t.moveTo(2,0),t.lineTo(2,n),t.lineTo(60,i-2),t.lineTo(l,i-2),t.stroke()})}function serviceDetail(){$(".service-detail").length<1||$(".service-detail .item-line").each(function(){var e=this,t=e.getContext("2d"),i=$(e).parent(),l=i[0].offsetWidth,i=i[0].offsetHeight,n=i-60;e.width=l,e.height=i,t.clearRect(0,0,l,i),t.strokeStyle="#00FFFF",t.lineWidth=2,t.beginPath(),t.moveTo(2,0),t.lineTo(2,n),t.lineTo(60,i-2),t.lineTo(l,i-2),t.stroke()})}let init=()=>{gsap.registerPlugin(ScrollTrigger),pinEl(),serviceDetail()};preloadImages("img").then(()=>{init()}),$(window).on("beforeunload",function(){$(window).scrollTop(0)});