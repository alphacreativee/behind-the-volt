import{preloadImages}from"../../libs/utils.js";function ourService(){function t(e){var t=this.querySelector(".card-item"),r=t.offsetHeight/2;t.style.transform="rotateX("+-(e.offsetY-r)/30+"deg) rotateY("+(e.offsetX-t.offsetWidth/2)/15+"deg)"}function r(e){this.querySelector(".card-item").style.transform="rotate(0)"}$(".our-services").length<1||document.querySelectorAll(".our-services .card").forEach(e=>{e.addEventListener("mousemove",t),e.addEventListener("mouseout",r)})}function projectScroll(){gsap.registerPlugin(ScrollTrigger,SplitText);let r=gsap.utils.toArray(".project"),a=r[0];gsap.utils.toArray(".project-title h2").forEach(e=>{new SplitText(e,{type:"words, chars",charsClass:"char",wordsClass:"word"}).chars.forEach(e=>{e.innerHTML=`<span>${e.textContent}</span>`})});let s=a.querySelector(".project-img"),c=a.querySelector(".project-img img");function l(e,t,r){gsap.to(e,{filter:"blur(0px)",y:0,skewX:"0deg",stagger:.05,opacity:1}),gsap.to(t,{y:0,opacity:1,duration:.75,delay:.1,ease:"power4.out"}),gsap.to(r,{y:0,opacity:1,duration:.75,delay:.2,ease:"power4.out"})}function p(e,t,r){gsap.to(e,{filter:"blur(10px)",y:10,willChange:"filter, transform",opacity:0,skewX:"-3deg"}),gsap.to(t,{y:"40px",opacity:0,duration:.5,ease:"power4.out"}),gsap.to(r,{y:"40px",opacity:0,duration:.5,ease:"power4.out"})}gsap.set(s,{scale:.5,borderRadius:"400px"}),gsap.set(c,{scale:1.5});let i=a.querySelectorAll(".char span"),n=a.querySelector(".project-description"),g=a.querySelector(".project-button");ScrollTrigger.create({trigger:a,start:"top top",end:"+=300vh",onUpdate:e=>{var e=e.progress,t=.5+.5*e,r=400-375*e,o=1.5-.5*e;gsap.set(s,{scale:t,borderRadius:r+"px"}),gsap.set(c,{scale:o}),1<=e&&!a.contentRevealed&&(a.contentRevealed=!0,l(i,n,g)),e<1&&a.contentRevealed&&(a.contentRevealed=!1,p(i,n,g))}}),r.forEach((e,t)=>{t=t===r.length-1;ScrollTrigger.create({trigger:e,start:"top top",end:t?"+=100vh":"top top",endTrigger:t?null:r[r.length-1],pin:!0,pinSpacing:t})}),r.forEach((e,t)=>{t<r.length-1&&(e.querySelector(".project-wrapper"),ScrollTrigger.create({trigger:r[t+1],start:"top bottom",end:"top top",onUpdate:e=>{e=e.progress;gsap.set(s,{scale:1-.25*e,opacity:1-e})}}))}),r.forEach((e,t)=>{if(0<t){let t=e.querySelector(".project-img img"),r=e.querySelector(".project-img");ScrollTrigger.create({trigger:e,start:"top bottom",end:"top top",onUpdate:e=>{e=e.progress;gsap.set(t,{scale:2-e}),gsap.set(r,{borderRadius:150-125*e+"px"})}})}}),r.forEach((o,e)=>{if(0!==e){let e=o.querySelector(".project-description"),t=o.querySelectorAll(".char span"),r=o.querySelector(".project-button");ScrollTrigger.create({trigger:o,start:"top top",markers:!0,onEnter:()=>l(t,e,r),onLeave:()=>p(t,e,r)})}})}let init=()=>{gsap.registerPlugin(ScrollTrigger),projectScroll(),ourService()};preloadImages("img").then(()=>{init()}),$(window).on("beforeunload",function(){$(window).scrollTop(0)});